/*!
 * angular-chart.js - An angular.js wrapper for Chart.js
 * http://jtblin.github.io/angular-chart.js/
 * Version: 1.1.1
 *
 * Copyright 2016 Jerome Touffe-Blin
 * Released under the BSD-2-Clause license
 * https://github.com/jtblin/angular-chart.js/blob/master/LICENSE
 */
;!function(a){if("object"==typeof exports){module.exports=a("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"))}else{if("function"==typeof define&&define.amd){define(["angular","chart"],a)}else{if("undefined"==typeof angular){throw new Error("AngularJS framework needs to be included, see https://angularjs.org/")}if("undefined"==typeof Chart){throw new Error("Chart.js library needs to be included, see http://jtblin.github.io/angular-chart.js/")}a(angular,Chart)}}}(function(c,d){function f(){var i={responsive:!0},h={Chart:d,getOptions:function(j){var e=j&&i[j]||{};return c.extend({},i,e)}};this.setOptions=function(a,e){e?i[a]=c.merge(i[a]||{},e):(e=a,i=c.merge(i,e)),c.merge(h.Chart.defaults,i)},this.$get=function(){return h}}function b(S,W){function K(k,l,e){var s=z(k,l);if(G(l)&&N(k,l,e,s)){var m=e[0],p=m.getContext("2d");l.chartGetColor=n(l);var h=V(k,l);t(l),l.chart=new S.Chart(p,{type:k,data:h,options:s}),l.$emit("chart-create",l.chart),I(m,l)}}function U(a,e){return !!(a&&e&&a.length&&e.length)&&(Array.isArray(a[0])?a.length===e.length&&a.every(function(h,i){return h.length===e[i].length}):e.reduce(O,0)>0&&a.length===e.length)}function O(a,e){return a+e}function x(i,k,h){var l={point:void 0,points:void 0};return function(p){var s=i.chart.getElementAtEvent||i.chart.getPointAtEvent,m=i.chart.getElementsAtEvent||i.chart.getPointsAtEvent;if(m){var e=m.call(i.chart,p),a=s?s.call(i.chart,p)[0]:void 0;h!==!1&&(c.equals(l.points,e)||c.equals(l.point,a))||(l.point=a,l.points=e,i[k](e,p,a))}}}function M(e,k){for(var h=c.copy(k.chartColors||S.getOptions(e).chartColors||d.defaults.global.colors),i=h.length<k.chartData.length;h.length<k.chartData.length;){h.push(k.chartGetColor())}return i&&(k.chartColors=h),h.map(P)}function P(a){return"string"==typeof a&&"r"===a[0]?R(r(a)):"string"==typeof a&&"#"===a[0]?R(J(a.substr(1))):"object"==typeof a&&null!==a?a:E()}function E(){var a=[T(0,255),T(0,255),T(0,255)];return R(a)}function R(a){var e=a[3]||1;return a=a.slice(0,3),{backgroundColor:Q(a,0.2),pointBackgroundColor:Q(a,e),pointHoverBackgroundColor:Q(a,0.8),borderColor:Q(a,e),pointBorderColor:"#fff",pointHoverBorderColor:Q(a,e)}}function T(a,e){return Math.floor(Math.random()*(e-a+1))+a}function Q(a,e){return g?"rgb("+a.join(",")+")":"rgba("+a.concat(e).join(",")+")"}function J(i){var k=parseInt(i,16),l=k>>16&255,h=k>>8&255,m=255&k;return[l,h,m]}function r(a){var e=a.match(/^rgba?\(([\d,.]+)\)$/);if(!e){throw new Error("Cannot parse rgb value")}return a=e[1].split(","),a.map(Number)}function G(a){return a.chartData&&a.chartData.length}function n(a){return"function"==typeof a.chartGetColor?a.chartGetColor:E}function V(a,h){var i=M(a,h);return Array.isArray(h.chartData[0])?L(h.chartLabels,h.chartData,h.chartSeries||[],i,h.chartDatasetOverride):q(h.chartLabels,h.chartData,i,h.chartDatasetOverride)}function L(i,k,h,m,l){return{labels:i,datasets:k.map(function(a,o){var p=c.extend({},m[o],{label:h[o],data:a});return l&&l.length>=o&&c.merge(p,l[o]),p})}}function q(i,k,h,m){var l={labels:i,datasets:[{data:k,backgroundColor:h.map(function(a){return a.pointBackgroundColor}),hoverBackgroundColor:h.map(function(a){return a.backgroundColor})}]};return m&&c.merge(l.datasets[0],m),l}function z(h,e){return c.extend({},S.getOptions(h),e.chartOptions)}function I(a,h){a.onclick=h.chartClick?x(h,"chartClick",!1):c.noop,a.onmousemove=h.chartHover?x(h,"chartHover",!0):c.noop}function H(a,e){Array.isArray(e.chartData[0])?e.chart.data.datasets.forEach(function(h,i){h.data=a[i]}):e.chart.data.datasets[0].data=a,e.chart.update(),e.$emit("chart-update",e.chart)}function j(a){return !a||Array.isArray(a)&&!a.length||"object"==typeof a&&!Object.keys(a).length}function N(a,h,i,k){return !k.responsive||0!==i[0].clientHeight||(W(function(){K(a,h,i)},50,!1),!1)}function t(a){a.chart&&(a.chart.destroy(),a.$emit("chart-destroy",a.chart))}return function(a){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(p,k){function o(l,s){if(!l||!l.length||Array.isArray(l[0])&&!l[0].length){return void t(p)}var e=a||p.chartType;if(e){return p.chart&&U(l,s)?H(l,p):void K(e,p,k)}}function m(s,l){if(!j(s)&&!c.equals(s,l)){var e=a||p.chartType;e&&K(e,p,k)}}function h(e,i){j(e)||c.equals(e,i)||K(e,p,k)}g&&window.G_vmlCanvasManager.initElement(k[0]),p.$watch("chartData",o,!0),p.$watch("chartSeries",m,!0),p.$watch("chartLabels",m,!0),p.$watch("chartOptions",m,!0),p.$watch("chartColors",m,!0),p.$watch("chartDatasetOverride",m,!0),p.$watch("chartType",h,!1),p.$on("$destroy",function(){t(p)}),p.$on("$resize",function(){p.chart&&p.chart.resize()})}}}}d.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",d.defaults.global.tooltips.mode="label",d.defaults.global.elements.line.borderWidth=2,d.defaults.global.elements.rectangle.borderWidth=2,d.defaults.global.legend.display=!1,d.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var g="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return g&&(d.defaults.global.animation=!1),c.module("chart.js",[]).provider("ChartJs",f).factory("ChartJsFactory",["ChartJs","$timeout",b]).directive("chartBase",["ChartJsFactory",function(a){return new a}]).directive("chartLine",["ChartJsFactory",function(a){return new a("line")}]).directive("chartBar",["ChartJsFactory",function(a){return new a("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(a){return new a("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(a){return new a("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(a){return new a("doughnut")}]).directive("chartPie",["ChartJsFactory",function(a){return new a("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(a){return new a("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(a){return new a("bubble")}]).name});
/*!
 * AngularJS Material Design
 * https://github.com/angular/material
 * @license MIT
 * v1.1.4-master-87d1cb1
 */
;!function(u,m,j){function v(){return{controller:d,template:f,compile:function(a,c){a.addClass("md-virtual-repeat-container").addClass(c.hasOwnProperty("mdOrientHorizontal")?"md-orient-horizontal":"md-orient-vertical")}}}function f(a){return'<div class="md-virtual-repeat-scroller" role="presentation"><div class="md-virtual-repeat-sizer" role="presentation"></div><div class="md-virtual-repeat-offsetter" role="presentation">'+a[0].innerHTML+"</div></div>"}function d(D,z,E,x,w,e,A,y,C){this.$rootScope=w,this.$scope=A,this.$element=y,this.$attrs=C,this.size=0,this.scrollSize=0,this.scrollOffset=0,this.horizontal=this.$attrs.hasOwnProperty("mdOrientHorizontal"),this.repeater=null,this.autoShrink=this.$attrs.hasOwnProperty("mdAutoShrink"),this.autoShrinkMin=parseInt(this.$attrs.mdAutoShrinkMin,10)||0,this.originalSize=null,this.offsetSize=parseInt(this.$attrs.mdOffsetSize,10)||0,this.oldElementSize=null,this.maxElementPixels=E.ELEMENT_MAX_PIXELS,this.$attrs.mdTopIndex?(this.bindTopIndex=x(this.$attrs.mdTopIndex),this.topIndex=this.bindTopIndex(this.$scope),m.isDefined(this.topIndex)||(this.topIndex=0,this.bindTopIndex.assign(this.$scope,0)),this.$scope.$watch(this.bindTopIndex,m.bind(this,function(a){a!==this.topIndex&&this.scrollToIndex(a)}))):this.topIndex=0,this.scroller=y[0].querySelector(".md-virtual-repeat-scroller"),this.sizer=this.scroller.querySelector(".md-virtual-repeat-sizer"),this.offsetter=this.scroller.querySelector(".md-virtual-repeat-offsetter");var B=m.bind(this,this.updateSize);D(m.bind(this,function(){B();var a=z.debounce(B,10,null,!1),c=m.element(e);this.size||a(),c.on("resize",a),A.$on("$destroy",function(){c.off("resize",a)}),A.$emit("$md-resize-enable"),A.$on("$md-resize",B)}))}function b(a){return{controller:k,priority:1000,require:["mdVirtualRepeat","^^mdVirtualRepeatContainer"],restrict:"A",terminal:!0,transclude:"element",compile:function(x,c){var t=c.mdVirtualRepeat,z=t.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)\s*$/),y=z[1],w=a(z[2]),l=c.mdExtraName&&a(c.mdExtraName);return function(o,A,h,r,B){r[0].link_(r[1],B,y,w,l)}}}}function k(e,c,x,A,z,y,w,a){this.$scope=e,this.$element=c,this.$attrs=x,this.$browser=A,this.$document=z,this.$mdUtil=a,this.$rootScope=y,this.$$rAF=w,this.onDemand=a.parseAttributeBoolean(x.mdOnDemand),this.browserCheckUrlChange=A.$$checkUrlChange,this.newStartIndex=0,this.newEndIndex=0,this.newVisibleEnd=0,this.startIndex=0,this.endIndex=0,this.itemSize=e.$eval(x.mdItemSize)||null,this.isFirstRender=!0,this.isVirtualRepeatUpdating_=!1,this.itemsLength=0,this.unwatchItemSize_=m.noop,this.blocks={},this.pooledBlocks=[],e.$on("$destroy",m.bind(this,this.cleanupBlocks_))}function g(a){if(!m.isFunction(a.getItemAtIndex)||!m.isFunction(a.getLength)){throw Error("When md-on-demand is enabled, the Object passed to md-virtual-repeat must implement functions getItemAtIndex() and getLength() ")}this.model=a}function q(a){return{restrict:"A",link:function(h,n,c){var l=h.$eval(c.mdForceHeight)||null;l&&n&&(n[0].style.height=l)}}}d.$inject=["$$rAF","$mdUtil","$mdConstant","$parse","$rootScope","$window","$scope","$element","$attrs"],k.$inject=["$scope","$element","$attrs","$browser","$document","$rootScope","$$rAF","$mdUtil"],b.$inject=["$parse"],m.module("material.components.virtualRepeat",["material.core","material.components.showHide"]).directive("mdVirtualRepeatContainer",v).directive("mdVirtualRepeat",b).directive("mdForceHeight",q);var p=3;d.prototype.register=function(a){this.repeater=a,m.element(this.scroller).on("scroll wheel touchmove touchend",m.bind(this,this.handleScroll_))},d.prototype.isHorizontal=function(){return this.horizontal},d.prototype.getSize=function(){return this.size},d.prototype.setSize_=function(a){var c=this.getDimensionName_();this.size=a,this.$element[0].style[c]=a+"px"},d.prototype.unsetSize_=function(){this.$element[0].style[this.getDimensionName_()]=this.oldElementSize,this.oldElementSize=null},d.prototype.updateSize=function(){this.originalSize||(this.size=this.isHorizontal()?this.$element[0].clientWidth:this.$element[0].clientHeight,this.handleScroll_(),this.repeater&&this.repeater.containerUpdated())},d.prototype.getScrollSize=function(){return this.scrollSize},d.prototype.getDimensionName_=function(){return this.isHorizontal()?"width":"height"},d.prototype.sizeScroller_=function(c){var l=this.getDimensionName_(),a=this.isHorizontal()?"height":"width";if(this.sizer.innerHTML="",c<this.maxElementPixels){this.sizer.style[l]=c+"px"}else{this.sizer.style[l]="auto",this.sizer.style[a]="auto";var h=Math.floor(c/this.maxElementPixels),w=document.createElement("div");w.style[l]=this.maxElementPixels+"px",w.style[a]="1px";for(var r=0;r<h;r++){this.sizer.appendChild(w.cloneNode(!1))}w.style[l]=c-h*this.maxElementPixels+"px",this.sizer.appendChild(w)}},d.prototype.autoShrink_=function(c){var l=Math.max(c,this.autoShrinkMin*this.repeater.getItemSize());if(this.autoShrink&&l!==this.size){null===this.oldElementSize&&(this.oldElementSize=this.$element[0].style[this.getDimensionName_()]);var a=this.originalSize||this.size;if(!a||l<a){this.originalSize||(this.originalSize=this.size),this.setSize_(l)}else{if(null!==this.originalSize){this.unsetSize_();var h=this.originalSize;this.originalSize=null,h||this.updateSize(),this.setSize_(h||this.size)}}this.repeater.containerUpdated()}},d.prototype.setScrollSize=function(a){var c=a+this.offsetSize;this.scrollSize!==c&&(this.sizeScroller_(c),this.autoShrink_(c),this.scrollSize=c)},d.prototype.getScrollOffset=function(){return this.scrollOffset},d.prototype.scrollTo=function(a){this.scroller[this.isHorizontal()?"scrollLeft":"scrollTop"]=a,this.handleScroll_()},d.prototype.scrollToIndex=function(c){var h=this.repeater.getItemSize(),a=this.repeater.itemsLength;c>a&&(c=a-1),this.scrollTo(h*c)},d.prototype.resetScroll=function(){this.scrollTo(0)},d.prototype.handleScroll_=function(){var c="rtl"!=document.dir&&"rtl"!=document.body.dir;c||this.maxSize||(this.scroller.scrollLeft=this.scrollSize,this.maxSize=this.scroller.scrollLeft);var l=this.isHorizontal()?c?this.scroller.scrollLeft:this.maxSize-this.scroller.scrollLeft:this.scroller.scrollTop;if(!(l===this.scrollOffset||l>this.scrollSize-this.size)){var a=this.repeater.getItemSize();if(a){var h=Math.max(0,Math.floor(l/a)-p),w=(this.isHorizontal()?"translateX(":"translateY(")+(!this.isHorizontal()||c?h*a:-(h*a))+"px)";if(this.scrollOffset=l,this.offsetter.style.webkitTransform=w,this.offsetter.style.transform=w,this.bindTopIndex){var r=Math.floor(l/a);r!==this.topIndex&&r<this.repeater.getItemCount()&&(this.topIndex=r,this.bindTopIndex.assign(this.$scope,r),this.$rootScope.$$phase||this.$scope.$digest())}this.repeater.containerUpdated()}}},k.Block,k.prototype.link_=function(c,a,e,l,h){this.container=c,this.transclude=a,this.repeatName=e,this.rawRepeatListExpression=l,this.extraName=h,this.sized=!1,this.repeatListExpression=m.bind(this,this.repeatListExpression_),this.container.register(this)},k.prototype.cleanupBlocks_=function(){m.forEach(this.pooledBlocks,function(a){a.element.remove()})},k.prototype.readItemSize_=function(){if(!this.itemSize){this.items=this.repeatListExpression(this.$scope),this.parentNode=this.$element[0].parentNode;var a=this.getBlock_(0);a.element[0].parentNode||this.parentNode.appendChild(a.element[0]),this.itemSize=a.element[0][this.container.isHorizontal()?"offsetWidth":"offsetHeight"]||null,this.blocks[0]=a,this.poolBlock_(0),this.itemSize&&this.containerUpdated()}},k.prototype.repeatListExpression_=function(c){var h=this.rawRepeatListExpression(c);if(this.onDemand&&h){var a=new g(h);return a.$$includeIndexes(this.newStartIndex,this.newVisibleEnd),a}return h},k.prototype.containerUpdated=function(){return this.itemSize?(this.sized||(this.items=this.repeatListExpression(this.$scope)),this.sized||(this.unwatchItemSize_(),this.sized=!0,this.$scope.$watchCollection(this.repeatListExpression,m.bind(this,function(a,c){this.isVirtualRepeatUpdating_||this.virtualRepeatUpdate_(a,c)}))),this.updateIndexes_(),void ((this.newStartIndex!==this.startIndex||this.newEndIndex!==this.endIndex||this.container.getScrollOffset()>this.container.getScrollSize())&&(this.items instanceof g&&this.items.$$includeIndexes(this.newStartIndex,this.newEndIndex),this.virtualRepeatUpdate_(this.items,this.items)))):(this.unwatchItemSize_&&this.unwatchItemSize_!==m.noop&&this.unwatchItemSize_(),this.unwatchItemSize_=this.$scope.$watchCollection(this.repeatListExpression,m.bind(this,function(a){a&&a.length&&this.readItemSize_()})),void (this.$rootScope.$$phase||this.$scope.$digest()))},k.prototype.getItemSize=function(){return this.itemSize},k.prototype.getItemCount=function(){return this.itemsLength},k.prototype.virtualRepeatUpdate_=function(E,z){this.isVirtualRepeatUpdating_=!0;var F=E&&E.length||0,x=!1;if(this.items&&F<this.items.length&&0!==this.container.getScrollOffset()){this.items=E;var w=this.container.getScrollOffset();this.container.resetScroll(),this.container.scrollTo(w)}F!==this.itemsLength&&(x=!0,this.itemsLength=F),this.items=E,(E!==z||x)&&this.updateIndexes_(),this.parentNode=this.$element[0].parentNode,x&&this.container.setScrollSize(F*this.itemSize),Object.keys(this.blocks).forEach(function(a){var c=parseInt(a,10);(c<this.newStartIndex||c>=this.newEndIndex)&&this.poolBlock_(c)},this),this.$browser.$$checkUrlChange=m.noop;var e,A,y=[],D=[];for(e=this.newStartIndex;e<this.newEndIndex&&null==this.blocks[e];e++){A=this.getBlock_(e),this.updateBlock_(A,e),y.push(A)}for(;null!=this.blocks[e];e++){this.updateBlock_(this.blocks[e],e)}for(var C=e-1;e<this.newEndIndex;e++){A=this.getBlock_(e),this.updateBlock_(A,e),D.push(A)}if(y.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(y),this.$element[0].nextSibling),D.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(D),this.blocks[C]&&this.blocks[C].element[0].nextSibling),this.$browser.$$checkUrlChange=this.browserCheckUrlChange,this.startIndex=this.newStartIndex,this.endIndex=this.newEndIndex,this.isFirstRender){this.isFirstRender=!1;var B=this.$attrs.mdStartIndex?this.$scope.$eval(this.$attrs.mdStartIndex):this.container.topIndex;this.$mdUtil.nextTick(function(){this.container.scrollToIndex(B)}.bind(this))}this.isVirtualRepeatUpdating_=!1},k.prototype.getBlock_=function(c){if(this.pooledBlocks.length){return this.pooledBlocks.pop()}var a;return this.transclude(m.bind(this,function(i,h){a={element:i,"new":!0,scope:h},this.updateScope_(h,c),this.parentNode.appendChild(i[0])})),a},k.prototype.updateBlock_=function(a,c){this.blocks[c]=a,(a["new"]||a.scope.$index!==c||a.scope[this.repeatName]!==this.items[c])&&(a["new"]=!1,this.updateScope_(a.scope,c),this.$rootScope.$$phase||a.scope.$digest())},k.prototype.updateScope_=function(a,c){a.$index=c,a[this.repeatName]=this.items&&this.items[c],this.extraName&&(a[this.extraName(this.$scope)]=this.items[c])},k.prototype.poolBlock_=function(a){this.pooledBlocks.push(this.blocks[a]),this.parentNode.removeChild(this.blocks[a].element[0]),delete this.blocks[a]},k.prototype.domFragmentFromBlocks_=function(a){var c=this.$document[0].createDocumentFragment();return a.forEach(function(e){c.appendChild(e.element[0])}),c},k.prototype.updateIndexes_=function(){var a=this.items?this.items.length:0,c=Math.ceil(this.container.getSize()/this.itemSize);this.newStartIndex=Math.max(0,Math.min(a-c,Math.floor(this.container.getScrollOffset()/this.itemSize))),this.newVisibleEnd=this.newStartIndex+c+p,this.newEndIndex=Math.min(a,this.newVisibleEnd),this.newStartIndex=Math.max(0,this.newStartIndex-p)},g.prototype.$$includeIndexes=function(c,h){for(var a=c;a<h;a++){this.hasOwnProperty(a)||(this[a]=this.model.getItemAtIndex(a))}this.length=this.model.getLength()},q.$inject=["$mdUtil"]}(window,window.angular);
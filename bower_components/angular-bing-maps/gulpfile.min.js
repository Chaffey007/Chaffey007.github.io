var gulp=require("gulp");var karma=require("karma").server;var concat=require("gulp-concat");var uglify=require("gulp-uglify");var rename=require("gulp-rename");var path=require("path");var plumber=require("gulp-plumber");var runSequence=require("run-sequence");var jshint=require("gulp-jshint");var map=require("map-stream");var notify=require("gulp-notify");var browserify=require("browserify");var transform=require("vinyl-transform");var buffer=require("vinyl-buffer");var ngAnnotate=require("gulp-ng-annotate");var rootDirectory=path.resolve("./");var sourceDirectory=path.join(rootDirectory,"./src");var sourceFiles=[path.join(sourceDirectory,"/**/*.module.js"),path.join(sourceDirectory,"/**/*.js")];gulp.task("build",function(){var a=transform(function(d){var c=browserify(d);return c.bundle()});gulp.src(sourceFiles).pipe(plumber()).pipe(concat("angular-bing-maps.js")).pipe(ngAnnotate({single_quotes:true})).pipe(gulp.dest("./dist")).pipe(a).pipe(gulp.dest("./dist")).pipe(uglify()).pipe(rename("angular-bing-maps.min.js")).pipe(gulp.dest("./dist"))});gulp.task("process-all",function(a){runSequence("jshint-src","test-src","build",a)});gulp.task("watch",function(){gulp.watch(sourceFiles,["process-all"])});gulp.task("jshint-src",function(){return gulp.src(sourceFiles).pipe(plumber()).pipe(jshint()).pipe(jshint.reporter("jshint-stylish")).pipe(jshint.reporter("fail"))});gulp.task("test-src",function(a){karma.start({configFile:__dirname+"/karma-src.conf.js",singleRun:true},a)});gulp.task("test-dist-concatenated",function(a){karma.start({configFile:__dirname+"/karma-dist-concatenated.conf.js",singleRun:true},a)});gulp.task("test-dist-minified",function(a){karma.start({configFile:__dirname+"/karma-dist-minified.conf.js",singleRun:true},a)});gulp.task("default",function(){runSequence("process-all","watch")});
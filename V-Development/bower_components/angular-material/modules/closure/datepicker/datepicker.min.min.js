/*!
 * AngularJS Material Design
 * https://github.com/angular/material
 * @license MIT
 * v1.1.5
 */
;goog.provide("ngmaterial.components.datepicker");goog.require("ngmaterial.components.icon");goog.require("ngmaterial.components.virtualRepeat");goog.require("ngmaterial.core");angular.module("material.components.datepicker",["material.core","material.components.icon","material.components.virtualRepeat"]);(function(){g["$inject"]=["$element","$scope","$$mdDateUtil","$mdUtil","$mdConstant","$mdTheming","$$rAF","$attrs","$mdDateLocale"];angular.module("material.components.datepicker").directive("mdCalendar",e);function e(){return{template:function(c,d){var a=d.hasOwnProperty("ngIf")?"":'ng-if="calendarCtrl.isInitialized"';var b='<div ng-switch="calendarCtrl.currentView" '+a+'><md-calendar-year ng-switch-when="year"></md-calendar-year><md-calendar-month ng-switch-default></md-calendar-month></div>';return b},scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate",dateFilter:"=mdDateFilter",_currentView:"@mdCurrentView"},require:["ngModel","mdCalendar"],controller:g,controllerAs:"calendarCtrl",bindToController:true,link:function(b,d,k,a){var l=a[0];var c=a[1];c.configureNgModel(l)}}}var f=340;var h=0;function g(a,b,p,u,v,r,d,c,t){r(a);this.$element=a;this.$scope=b;this.dateUtil=p;this.$mdUtil=u;this.keyCode=v.KEY_CODE;this.$$rAF=d;this.$mdDateLocale=t;this.today=this.dateUtil.createDateAtMidnight();this.ngModelCtrl=null;this.SELECTED_DATE_CLASS="md-calendar-selected-date";this.TODAY_CLASS="md-calendar-date-today";this.FOCUSED_DATE_CLASS="md-focus";this.id=h++;this.displayDate=null;this.selectedDate=null;this.firstRenderableDate=null;this.lastRenderableDate=null;this.isInitialized=false;this.width=0;this.scrollbarWidth=0;if(!c.tabindex){a.attr("tabindex","-1")}var q=angular.bind(this,this.handleKeyEvent);var s;if(a.parent().hasClass("md-datepicker-calendar")){s=angular.element(document.body)}else{s=a}s.on("keydown",q);b.$on("$destroy",function(){s.off("keydown",q)});if(angular.version.major===1&&angular.version.minor<=4){this.$onInit()}}g.prototype.$onInit=function(){this.currentView=this._currentView||"month";var a=this.$mdDateLocale;if(this.minDate&&this.minDate>a.firstRenderableDate){this.firstRenderableDate=this.minDate}else{this.firstRenderableDate=a.firstRenderableDate}if(this.maxDate&&this.maxDate<a.lastRenderableDate){this.lastRenderableDate=this.maxDate}else{this.lastRenderableDate=a.lastRenderableDate}};g.prototype.configureNgModel=function(a){var b=this;b.ngModelCtrl=a;b.$mdUtil.nextTick(function(){b.isInitialized=true});a.$render=function(){var c=this.$viewValue;b.$scope.$broadcast("md-calendar-parent-changed",c);if(!b.selectedDate){b.selectedDate=c}if(!b.displayDate){b.displayDate=b.selectedDate||b.today}}};g.prototype.setNgModelValue=function(b){var a=this.dateUtil.createDateAtMidnight(b);this.focus(a);this.$scope.$emit("md-calendar-change",a);this.ngModelCtrl.$setViewValue(a);this.ngModelCtrl.$render();return a};g.prototype.setCurrentView=function(a,b){var c=this;c.$mdUtil.nextTick(function(){c.currentView=a;if(b){c.displayDate=angular.isDate(b)?b:new Date(b)}})};g.prototype.focus=function(c){if(this.dateUtil.isValidDate(c)){var b=this.$element[0].querySelector(".md-focus");if(b){b.classList.remove(this.FOCUSED_DATE_CLASS)}var a=this.getDateId(c,this.currentView);var d=document.getElementById(a);if(d){d.classList.add(this.FOCUSED_DATE_CLASS);d.focus();this.displayDate=c}}else{var j=this.$element[0].querySelector("[ng-switch]");if(j){j.focus()}}};g.prototype.getActionFromKeyEvent=function(b){var a=this.keyCode;switch(b.which){case a.ENTER:return"select";case a.RIGHT_ARROW:return"move-right";case a.LEFT_ARROW:return"move-left";case a.DOWN_ARROW:return b.metaKey?"move-page-down":"move-row-down";case a.UP_ARROW:return b.metaKey?"move-page-up":"move-row-up";case a.PAGE_DOWN:return"move-page-down";case a.PAGE_UP:return"move-page-up";case a.HOME:return"start";case a.END:return"end";default:return null}};g.prototype.handleKeyEvent=function(a){var b=this;this.$scope.$apply(function(){if(a.which==b.keyCode.ESCAPE||a.which==b.keyCode.TAB){b.$scope.$emit("md-calendar-close");if(a.which==b.keyCode.TAB){a.preventDefault()}return}var c=b.getActionFromKeyEvent(a);if(c){a.preventDefault();a.stopPropagation();b.$scope.$broadcast("md-calendar-parent-action",c)}})};g.prototype.hideVerticalScrollbar=function(b){var d=this;var c=b.$element[0];var j=c.querySelector(".md-calendar-scroll-mask");if(d.width>0){a()}else{d.$$rAF(function(){var i=b.calendarScroller;d.scrollbarWidth=i.offsetWidth-i.clientWidth;d.width=c.querySelector("table").offsetWidth;a()})}function a(){var m=d.width||f;var i=d.scrollbarWidth;var n=b.calendarScroller;j.style.width=m+"px";n.style.width=(m+i)+"px";n.style.paddingRight=i+"px"}};g.prototype.getDateId=function(b,a){if(!a){throw new Error("A namespace for the date id has to be specified.")}return["md",this.id,a,b.getFullYear(),b.getMonth(),b.getDate()].join("-")};g.prototype.updateVirtualRepeat=function(){var a=this.$scope;var b=a.$on("$md-resize-enable",function(){if(!a.$$phase){a.$apply()}b()})}})();(function(){g["$inject"]=["$element","$scope","$animate","$q","$$mdDateUtil","$mdDateLocale"];angular.module("material.components.datepicker").directive("mdCalendarMonth",f);var e=265;var h=45;function f(){return{template:'<table aria-hidden="true" class="md-calendar-day-header"><thead></thead></table><div class="md-calendar-scroll-mask"><md-virtual-repeat-container class="md-calendar-scroll-container" md-offset-size="'+(h-e)+'"><table role="grid" tabindex="0" class="md-calendar" aria-readonly="true"><tbody md-calendar-month-body role="rowgroup" md-virtual-repeat="i in monthCtrl.items" md-month-offset="$index" class="md-calendar-month" md-start-index="monthCtrl.getSelectedMonthIndex()" md-item-size="'+e+'"><tr aria-hidden="true" md-force-height="\''+e+"px'\"></tr></tbody></table></md-virtual-repeat-container></div>",require:["^^mdCalendar","mdCalendarMonth"],controller:g,controllerAs:"monthCtrl",bindToController:true,link:function(c,k,l,b){var a=b[0];var d=b[1];d.initialize(a)}}}function g(m,c,a,d,b,n){this.$element=m;this.$scope=c;this.$animate=a;this.$q=d;this.dateUtil=b;this.dateLocale=n;this.calendarScroller=m[0].querySelector(".md-virtual-repeat-scroller");this.isInitialized=false;this.isMonthTransitionInProgress=false;var l=this;this.cellClickHandler=function(){var i=b.getTimestampFromNode(this);l.$scope.$apply(function(){l.calendarCtrl.setNgModelValue(i)})};this.headerClickHandler=function(){l.calendarCtrl.setCurrentView("year",b.getTimestampFromNode(this))}}g.prototype.initialize=function(a){this.items={length:this.dateUtil.getMonthDistance(a.firstRenderableDate,a.lastRenderableDate)+2};this.calendarCtrl=a;this.attachScopeListeners();a.updateVirtualRepeat();a.ngModelCtrl&&a.ngModelCtrl.$render()};g.prototype.getSelectedMonthIndex=function(){var a=this.calendarCtrl;return this.dateUtil.getMonthDistance(a.firstRenderableDate,a.displayDate||a.selectedDate||a.today)};g.prototype.changeSelectedDate=function(b){var c=this;var a=c.calendarCtrl;var d=a.selectedDate;a.selectedDate=b;this.changeDisplayDate(b).then(function(){var p=a.SELECTED_DATE_CLASS;var o="month";if(d){var n=document.getElementById(a.getDateId(d,o));if(n){n.classList.remove(p);n.setAttribute("aria-selected","false")}}if(b){var m=document.getElementById(a.getDateId(b,o));if(m){m.classList.add(p);m.setAttribute("aria-selected","true")}}})};g.prototype.changeDisplayDate=function(b){if(!this.isInitialized){this.buildWeekHeader();this.calendarCtrl.hideVerticalScrollbar(this);this.isInitialized=true;return this.$q.when()}if(!this.dateUtil.isValidDate(b)||this.isMonthTransitionInProgress){return this.$q.when()}this.isMonthTransitionInProgress=true;var a=this.animateDateChange(b);this.calendarCtrl.displayDate=b;var c=this;a.then(function(){c.isMonthTransitionInProgress=false});return a};g.prototype.animateDateChange=function(b){if(this.dateUtil.isValidDate(b)){var a=this.dateUtil.getMonthDistance(this.calendarCtrl.firstRenderableDate,b);this.calendarScroller.scrollTop=a*e}return this.$q.when()};g.prototype.buildWeekHeader=function(){var i=this.dateLocale.firstDayOfWeek;var b=this.dateLocale.shortDays;var a=document.createElement("tr");for(var d=0;d<7;d++){var c=document.createElement("th");c.textContent=b[(d+i)%7];a.appendChild(c)}this.$element.find("thead").append(a)};g.prototype.attachScopeListeners=function(){var a=this;a.$scope.$on("md-calendar-parent-changed",function(c,b){a.changeSelectedDate(b)});a.$scope.$on("md-calendar-parent-action",angular.bind(this,this.handleKeyEvent))};g.prototype.handleKeyEvent=function(c,b){var a=this.calendarCtrl;var k=a.displayDate;if(b==="select"){a.setNgModelValue(k)}else{var d=null;var l=this.dateUtil;switch(b){case"move-right":d=l.incrementDays(k,1);break;case"move-left":d=l.incrementDays(k,-1);break;case"move-page-down":d=l.incrementMonths(k,1);break;case"move-page-up":d=l.incrementMonths(k,-1);break;case"move-row-down":d=l.incrementDays(k,7);break;case"move-row-up":d=l.incrementDays(k,-7);break;case"start":d=l.getFirstDateOfMonth(k);break;case"end":d=l.getLastDateOfMonth(k);break}if(d){d=this.dateUtil.clampDate(d,a.minDate,a.maxDate);this.changeDisplayDate(d).then(function(){a.focus(d)})}}}})();(function(){c["$inject"]=["$compile","$$mdSvgRegistry"];d["$inject"]=["$element","$$mdDateUtil","$mdDateLocale"];angular.module("material.components.datepicker").directive("mdCalendarMonthBody",c);function c(b,a){var f=b('<md-icon md-svg-src="'+a.mdTabsArrow+'"></md-icon>')({})[0];return{require:["^^mdCalendar","^^mdCalendarMonth","mdCalendarMonthBody"],scope:{offset:"=mdMonthOffset"},controller:d,controllerAs:"mdMonthBodyCtrl",bindToController:true,link:function(n,p,r,m){var e=m[0];var o=m[1];var q=m[2];q.calendarCtrl=e;q.monthCtrl=o;q.arrowIcon=f.cloneNode(true);n.$watch(function(){return q.offset},function(g){if(angular.isNumber(g)){q.generateContent()}})}}}function d(b,a,f){this.$element=b;this.dateUtil=a;this.dateLocale=f;this.monthCtrl=null;this.calendarCtrl=null;this.offset=null;this.focusAfterAppend=null}d.prototype.generateContent=function(){var a=this.dateUtil.incrementMonths(this.calendarCtrl.firstRenderableDate,this.offset);this.$element.empty().append(this.buildCalendarForMonth(a));if(this.focusAfterAppend){this.focusAfterAppend.classList.add(this.calendarCtrl.FOCUSED_DATE_CLASS);this.focusAfterAppend.focus();this.focusAfterAppend=null}};d.prototype.buildDateCell=function(b){var j=this.monthCtrl;var a=this.calendarCtrl;var l=document.createElement("td");l.tabIndex=-1;l.classList.add("md-calendar-date");l.setAttribute("role","gridcell");if(b){l.setAttribute("tabindex","-1");l.setAttribute("aria-label",this.dateLocale.longDateFormatter(b));l.id=a.getDateId(b,"month");l.setAttribute("data-timestamp",b.getTime());if(this.dateUtil.isSameDay(b,a.today)){l.classList.add(a.TODAY_CLASS)}if(this.dateUtil.isValidDate(a.selectedDate)&&this.dateUtil.isSameDay(b,a.selectedDate)){l.classList.add(a.SELECTED_DATE_CLASS);l.setAttribute("aria-selected","true")}var k=this.dateLocale.dates[b.getDate()];if(this.isDateEnabled(b)){var i=document.createElement("span");i.classList.add("md-calendar-date-selection-indicator");i.textContent=k;l.appendChild(i);l.addEventListener("click",j.cellClickHandler);if(a.displayDate&&this.dateUtil.isSameDay(b,a.displayDate)){this.focusAfterAppend=l}}else{l.classList.add("md-calendar-date-disabled");l.textContent=k}}return l};d.prototype.isDateEnabled=function(a){return this.dateUtil.isDateWithinRange(a,this.calendarCtrl.minDate,this.calendarCtrl.maxDate)&&(!angular.isFunction(this.calendarCtrl.dateFilter)||this.calendarCtrl.dateFilter(a))};d.prototype.buildDateRow=function(b){var a=document.createElement("tr");a.setAttribute("role","row");a.setAttribute("aria-label",this.dateLocale.weekNumberFormatter(b));return a};d.prototype.buildCalendarForMonth=function(z){var b=this.dateUtil.isValidDate(z)?z:new Date();var B=this.dateUtil.getFirstDateOfMonth(b);var O=this.getLocaleDay_(B);var I=this.dateUtil.getNumberOfDaysInMonth(b);var i=document.createDocumentFragment();var G=1;var J=this.buildDateRow(G);i.appendChild(J);var K=this.offset===this.monthCtrl.items.length-1;var L=0;var N=document.createElement("td");var C=document.createElement("span");C.textContent=this.dateLocale.monthHeaderFormatter(b);N.appendChild(C);N.classList.add("md-calendar-month-label");if(this.calendarCtrl.maxDate&&B>this.calendarCtrl.maxDate){N.classList.add("md-calendar-month-label-disabled")}else{N.addEventListener("click",this.monthCtrl.headerClickHandler);N.setAttribute("data-timestamp",B.getTime());N.setAttribute("aria-label",this.dateLocale.monthFormatter(b));N.appendChild(this.arrowIcon.cloneNode(true))}if(O<=2){N.setAttribute("colspan","7");var F=this.buildDateRow();F.appendChild(N);i.insertBefore(F,J);if(K){return i}}else{L=3;N.setAttribute("colspan","3");J.appendChild(N)}for(var A=L;A<O;A++){J.appendChild(this.buildDateCell())}var E=O;var H=B;for(var j=1;j<=I;j++){if(E===7){if(K){return i}E=0;G++;J=this.buildDateRow(G);i.appendChild(J)}H.setDate(j);var M=this.buildDateCell(H);J.appendChild(M);E++}while(J.childNodes.length<7){J.appendChild(this.buildDateCell())}while(i.childNodes.length<6){var a=this.buildDateRow();for(var D=0;D<7;D++){a.appendChild(this.buildDateCell())}i.appendChild(a)}return i};d.prototype.getLocaleDay_=function(a){return(a.getDay()+(7-this.dateLocale.firstDayOfWeek))%7}})();(function(){f["$inject"]=["$element","$scope","$animate","$q","$$mdDateUtil"];angular.module("material.components.datepicker").directive("mdCalendarYear",e);var d=88;function e(){return{template:'<div class="md-calendar-scroll-mask"><md-virtual-repeat-container class="md-calendar-scroll-container"><table role="grid" tabindex="0" class="md-calendar" aria-readonly="true"><tbody md-calendar-year-body role="rowgroup" md-virtual-repeat="i in yearCtrl.items" md-year-offset="$index" class="md-calendar-year" md-start-index="yearCtrl.getFocusedYearIndex()" md-item-size="'+d+'"><tr aria-hidden="true" md-force-height="\''+d+"px'\"></tr></tbody></table></md-virtual-repeat-container></div>",require:["^^mdCalendar","mdCalendarYear"],controller:f,controllerAs:"yearCtrl",bindToController:true,link:function(j,k,l,b){var a=b[0];var c=b[1];c.initialize(a)}}}function f(l,c,a,j,b){this.$element=l;this.$scope=c;this.$animate=a;this.$q=j;this.dateUtil=b;this.calendarScroller=l[0].querySelector(".md-virtual-repeat-scroller");this.isInitialized=false;this.isMonthTransitionInProgress=false;var k=this;this.cellClickHandler=function(){k.calendarCtrl.setCurrentView("month",b.getTimestampFromNode(this))}}f.prototype.initialize=function(a){this.items={length:this.dateUtil.getYearDistance(a.firstRenderableDate,a.lastRenderableDate)+1};this.calendarCtrl=a;this.attachScopeListeners();a.updateVirtualRepeat();a.ngModelCtrl&&a.ngModelCtrl.$render()};f.prototype.getFocusedYearIndex=function(){var a=this.calendarCtrl;return this.dateUtil.getYearDistance(a.firstRenderableDate,a.displayDate||a.selectedDate||a.today)};f.prototype.changeDate=function(b){if(!this.isInitialized){this.calendarCtrl.hideVerticalScrollbar(this);this.isInitialized=true;return this.$q.when()}else{if(this.dateUtil.isValidDate(b)&&!this.isMonthTransitionInProgress){var c=this;var a=this.animateDateChange(b);c.isMonthTransitionInProgress=true;c.calendarCtrl.displayDate=b;return a.then(function(){c.isMonthTransitionInProgress=false})}}};f.prototype.animateDateChange=function(b){if(this.dateUtil.isValidDate(b)){var a=this.dateUtil.getYearDistance(this.calendarCtrl.firstRenderableDate,b);this.calendarScroller.scrollTop=a*d}return this.$q.when()};f.prototype.handleKeyEvent=function(c,b){var a=this.calendarCtrl;var n=a.displayDate;if(b==="select"){this.changeDate(n).then(function(){a.setCurrentView("month",n);a.focus(n)})}else{var m=null;var o=this.dateUtil;switch(b){case"move-right":m=o.incrementMonths(n,1);break;case"move-left":m=o.incrementMonths(n,-1);break;case"move-row-down":m=o.incrementMonths(n,6);break;case"move-row-up":m=o.incrementMonths(n,-6);break}if(m){var l=a.minDate?o.getFirstDateOfMonth(a.minDate):null;var p=a.maxDate?o.getFirstDateOfMonth(a.maxDate):null;m=o.getFirstDateOfMonth(this.dateUtil.clampDate(m,l,p));this.changeDate(m).then(function(){a.focus(m)})}}};f.prototype.attachScopeListeners=function(){var a=this;a.$scope.$on("md-calendar-parent-changed",function(c,b){a.changeDate(b)});a.$scope.$on("md-calendar-parent-action",angular.bind(a,a.handleKeyEvent))}})();(function(){d["$inject"]=["$element","$$mdDateUtil","$mdDateLocale"];angular.module("material.components.datepicker").directive("mdCalendarYearBody",c);function c(){return{require:["^^mdCalendar","^^mdCalendarYear","mdCalendarYearBody"],scope:{offset:"=mdYearOffset"},controller:d,controllerAs:"mdYearBodyCtrl",bindToController:true,link:function(l,m,n,b){var a=b[0];var j=b[1];var k=b[2];k.calendarCtrl=a;k.yearCtrl=j;l.$watch(function(){return k.offset},function(e){if(angular.isNumber(e)){k.generateContent()}})}}}function d(b,a,f){this.$element=b;this.dateUtil=a;this.dateLocale=f;this.calendarCtrl=null;this.yearCtrl=null;this.offset=null;this.focusAfterAppend=null}d.prototype.generateContent=function(){var a=this.dateUtil.incrementYears(this.calendarCtrl.firstRenderableDate,this.offset);this.$element.empty().append(this.buildCalendarForYear(a));if(this.focusAfterAppend){this.focusAfterAppend.classList.add(this.calendarCtrl.FOCUSED_DATE_CLASS);this.focusAfterAppend.focus();this.focusAfterAppend=null}};d.prototype.buildMonthCell=function(n,k){var a=this.calendarCtrl;var l=this.yearCtrl;var p=this.buildBlankCell();var b=new Date(n,k,1);p.setAttribute("aria-label",this.dateLocale.monthFormatter(b));p.id=a.getDateId(b,"year");p.setAttribute("data-timestamp",b.getTime());if(this.dateUtil.isSameMonthAndYear(b,a.today)){p.classList.add(a.TODAY_CLASS)}if(this.dateUtil.isValidDate(a.selectedDate)&&this.dateUtil.isSameMonthAndYear(b,a.selectedDate)){p.classList.add(a.SELECTED_DATE_CLASS);p.setAttribute("aria-selected","true")}var o=this.dateLocale.shortMonths[k];if(this.dateUtil.isMonthWithinRange(b,a.minDate,a.maxDate)){var m=document.createElement("span");m.classList.add("md-calendar-date-selection-indicator");m.textContent=o;p.appendChild(m);p.addEventListener("click",l.cellClickHandler);if(a.displayDate&&this.dateUtil.isSameMonthAndYear(b,a.displayDate)){this.focusAfterAppend=p}}else{p.classList.add("md-calendar-date-disabled");p.textContent=o}return p};d.prototype.buildBlankCell=function(){var a=document.createElement("td");a.tabIndex=-1;a.classList.add("md-calendar-date");a.setAttribute("role","gridcell");a.setAttribute("tabindex","-1");return a};d.prototype.buildCalendarForYear=function(n){var l=n.getFullYear();var o=document.createDocumentFragment();var a,m;var b=document.createElement("tr");var i=document.createElement("td");i.className="md-calendar-month-label";i.textContent=l;b.appendChild(i);for(m=0;m<6;m++){b.appendChild(this.buildMonthCell(l,m))}o.appendChild(b);var p=document.createElement("tr");p.appendChild(this.buildBlankCell());for(m=6;m<12;m++){p.appendChild(this.buildMonthCell(l,m))}o.appendChild(p);return o}})();(function(){angular.module("material.components.datepicker").config(["$provide",function(c){function d(){this.months=null;this.shortMonths=null;this.days=null;this.shortDays=null;this.dates=null;this.firstDayOfWeek=0;this.formatDate=null;this.parseDate=null;this.monthHeaderFormatter=null;this.weekNumberFormatter=null;this.longDateFormatter=null;this.msgCalendar="";this.msgOpenCalendar=""}d.prototype.$get=function(A,v){function E(h,e){if(!h){return""}var f=h.toLocaleTimeString();var g=h;if(h.getHours()===0&&(f.indexOf("11:")!==-1||f.indexOf("23:")!==-1)){g=new Date(h.getFullYear(),h.getMonth(),h.getDate(),1,0,0)}return v("date")(g,"M/d/yyyy",e)}function z(e){return new Date(e)}function F(e){e=e.trim();var f=/^(([a-zA-Z]{3,}|[0-9]{1,4})([ \.,]+|[\/\-])){2}([a-zA-Z]{3,}|[0-9]{1,4})$/;return f.test(e)}function G(e){return x.shortMonths[e.getMonth()]+" "+e.getFullYear()}function a(e){return x.months[e.getMonth()]+" "+e.getFullYear()}function C(e){return"Week "+e}function B(e){return[x.days[e.getDay()],x.months[e.getMonth()],x.dates[e.getDate()],e.getFullYear()].join(" ")}var b=A.DATETIME_FORMATS.SHORTDAY.map(function(e){return e.substring(0,1)});var H=Array(32);for(var y=1;y<=31;y++){H[y]=y}var w="Calendar";var i="Open calendar";var D=new Date(1880,0,1);var u=new Date(D.getFullYear()+250,0,1);var x={months:this.months||A.DATETIME_FORMATS.MONTH,shortMonths:this.shortMonths||A.DATETIME_FORMATS.SHORTMONTH,days:this.days||A.DATETIME_FORMATS.DAY,shortDays:this.shortDays||b,dates:this.dates||H,firstDayOfWeek:this.firstDayOfWeek||0,formatDate:this.formatDate||E,parseDate:this.parseDate||z,isDateComplete:this.isDateComplete||F,monthHeaderFormatter:this.monthHeaderFormatter||G,monthFormatter:this.monthFormatter||a,weekNumberFormatter:this.weekNumberFormatter||C,longDateFormatter:this.longDateFormatter||B,msgCalendar:this.msgCalendar||w,msgOpenCalendar:this.msgOpenCalendar||i,firstRenderableDate:this.firstRenderableDate||D,lastRenderableDate:this.lastRenderableDate||u};return x};d.prototype.$get["$inject"]=["$locale","$filter"];c.provider("$mdDateLocale",new d())}])})();(function(){angular.module("material.components.datepicker").factory("$$mdDateUtil",function(){return{getFirstDateOfMonth:K,getNumberOfDaysInMonth:B,getDateInNextMonth:J,getDateInPreviousMonth:R,isInNextMonth:I,isInPreviousMonth:Q,getDateMidpoint:x,isSameMonthAndYear:C,getWeekOfMonth:z,incrementDays:H,incrementMonths:y,getLastDateOfMonth:S,isSameDay:L,getMonthDistance:P,isValidDate:N,setDateTimeToMidnight:T,createDateAtMidnight:M,isDateWithinRange:O,incrementYears:E,getYearDistance:G,clampDate:F,getTimestampFromNode:A,isMonthWithinRange:D};function K(a){return new Date(a.getFullYear(),a.getMonth(),1)}function B(a){return new Date(a.getFullYear(),a.getMonth()+1,0).getDate()}function J(a){return new Date(a.getFullYear(),a.getMonth()+1,1)}function R(a){return new Date(a.getFullYear(),a.getMonth()-1,1)}function C(b,a){return b.getFullYear()===a.getFullYear()&&b.getMonth()===a.getMonth()}function L(b,a){return b.getDate()==a.getDate()&&C(b,a)}function I(a,b){var c=J(a);return C(c,b)}function Q(a,b){var c=R(a);return C(b,c)}function x(b,a){return M((b.getTime()+a.getTime())/2)}function z(a){var b=K(a);return Math.floor((b.getDay()+a.getDate()-1)/7)}function H(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+b)}function y(c,b){var a=new Date(c.getFullYear(),c.getMonth()+b,1);var d=B(a);if(d<c.getDate()){a.setDate(d)}else{a.setDate(c.getDate())}return a}function P(b,a){return(12*(a.getFullYear()-b.getFullYear()))+(a.getMonth()-b.getMonth())}function S(a){return new Date(a.getFullYear(),a.getMonth(),B(a))}function N(a){return a&&a.getTime&&!isNaN(a.getTime())}function T(a){if(N(a)){a.setHours(0,0,0,0)}}function M(a){var b;if(angular.isUndefined(a)){b=new Date()}else{b=new Date(a)}T(b);return b}function O(b,f,d){var c=M(b);var e=N(f)?M(f):null;var a=N(d)?M(d):null;return(!e||e<=c)&&(!a||a>=c)}function E(b,a){return y(b,a*12)}function G(b,a){return a.getFullYear()-b.getFullYear()}function F(b,d,c){var a=b;if(d&&b<d){a=new Date(d.getTime())}if(c&&b>c){a=new Date(c.getTime())}return a}function A(a){if(a&&a.hasAttribute("data-timestamp")){return Number(a.getAttribute("data-timestamp"))}}function D(b,c,e){var a=b.getMonth();var d=b.getFullYear();return(!c||c.getFullYear()<d||c.getMonth()<=a)&&(!e||e.getFullYear()>d||e.getMonth()>=a)}})})();(function(){w["$inject"]=["$scope","$element","$attrs","$window","$mdConstant","$mdTheming","$mdUtil","$mdDateLocale","$$mdDateUtil","$$rAF","$filter"];o["$inject"]=["$$mdSvgRegistry","$mdUtil","$mdAria","inputDirective"];angular.module("material.components.datepicker").directive("mdDatepicker",o);function o(c,b,a,d){return{template:function(i,h){var f=h.mdHideIcons;var e=h.ariaLabel||h.mdPlaceholder;var j=(f==="all"||f==="calendar")?"":'<md-button class="md-datepicker-button md-icon-button" type="button" tabindex="-1" aria-hidden="true" ng-click="ctrl.openCalendarPane($event)"><md-icon class="md-datepicker-calendar-icon" aria-label="md-calendar" md-svg-src="'+c.mdCalendar+'"></md-icon></md-button>';var g="";if(f!=="all"&&f!=="triangle"){g='<md-button type="button" md-no-ink class="md-datepicker-triangle-button md-icon-button" ng-click="ctrl.openCalendarPane($event)" aria-label="{{::ctrl.locale.msgOpenCalendar}}"><div class="md-datepicker-expand-triangle"></div></md-button>';i.addClass(q)}return j+'<div class="md-datepicker-input-container" ng-class="{\'md-datepicker-focused\': ctrl.isFocused}"><input '+(e?'aria-label="'+e+'" ':"")+'class="md-datepicker-input" aria-haspopup="true" aria-expanded="{{ctrl.isCalendarOpen}}" ng-focus="ctrl.setFocused(true)" ng-blur="ctrl.setFocused(false)"> '+g+'</div><div class="md-datepicker-calendar-pane md-whiteframe-z1" id="{{::ctrl.calendarPaneId}}"><div class="md-datepicker-input-mask"><div class="md-datepicker-input-mask-opaque"></div></div><div class="md-datepicker-calendar"><md-calendar role="dialog" aria-label="{{::ctrl.locale.msgCalendar}}" md-current-view="{{::ctrl.currentView}}"md-min-date="ctrl.minDate"md-max-date="ctrl.maxDate"md-date-filter="ctrl.dateFilter"ng-model="ctrl.date" ng-if="ctrl.isCalendarOpen"></md-calendar></div></div>'},require:["ngModel","mdDatepicker","?^mdInputContainer","?^form"],scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate",placeholder:"@mdPlaceholder",currentView:"@mdCurrentView",dateFilter:"=mdDateFilter",isOpen:"=?mdIsOpen",debounceInterval:"=mdDebounceInterval",dateLocale:"=mdDateLocale"},controller:w,controllerAs:"ctrl",bindToController:true,link:function(g,k,j,D){var f=D[0];var C=D[1];var e=D[2];var B=D[3];var l=b.parseAttributeBoolean(j.mdNoAsterisk);C.configureNgModel(f,e,d);if(e){var i=k[0].querySelector(".md-errors-spacer");if(i){k.after(angular.element("<div>").append(i))}e.setHasPlaceholder(j.mdPlaceholder);e.input=k;e.element.addClass(t).toggleClass(u,j.mdHideIcons!=="calendar"&&j.mdHideIcons!=="all");if(!e.label){a.expect(k,"aria-label",j.mdPlaceholder)}else{if(!l){j.$observe("required",function(y){e.label.toggleClass("md-required",!!y)})}}g.$watch(e.isErrorGetter||function(){return f.$invalid&&(f.$touched||(B&&B.$submitted))},e.setInvalid)}else{if(B){var h=g.$watch(function(){return B.$submitted},function(y){if(y){C.updateErrorState();h()}})}}}}}var s=3;var v="md-datepicker-invalid";var m="md-datepicker-open";var t="_md-datepicker-floating-label";var u="_md-datepicker-has-calendar-icon";var q="_md-datepicker-has-triangle-icon";var x=500;var r=368;var n=360;var p=/ipad|iphone|ipod|android/i;function w(i,h,j,d,f,b,e,c,a,l,k){this.$window=d;this.dateUtil=a;this.$mdConstant=f;this.$mdUtil=e;this.$$rAF=l;this.$mdDateLocale=c;this.documentElement=angular.element(document.documentElement);this.ngModelCtrl=null;this.inputElement=h[0].querySelector("input");this.ngInputElement=angular.element(this.inputElement);this.inputContainer=h[0].querySelector(".md-datepicker-input-container");this.calendarPane=h[0].querySelector(".md-datepicker-calendar-pane");this.calendarButton=h[0].querySelector(".md-datepicker-button");this.inputMask=angular.element(h[0].querySelector(".md-datepicker-input-mask-opaque"));this.$element=h;this.$attrs=j;this.$scope=i;this.date=null;this.isFocused=false;this.isDisabled;this.setDisabled(h[0].disabled||angular.isString(j.disabled));this.isCalendarOpen=false;this.openOnFocus=j.hasOwnProperty("mdOpenOnFocus");this.mdInputContainer=null;this.calendarPaneOpenedFrom=null;this.calendarPaneId="md-date-pane-"+e.nextUid();this.bodyClickHandler=angular.bind(this,this.handleBodyClick);this.windowEventName=p.test(navigator.userAgent||navigator.vendor||window.opera)?"orientationchange":"resize";this.windowEventHandler=e.debounce(angular.bind(this,this.closeCalendarPane),100);this.windowBlurHandler=angular.bind(this,this.handleWindowBlur);this.ngDateFilter=k("date");this.leftMargin=20;this.topMargin=null;if(j.tabindex){this.ngInputElement.attr("tabindex",j.tabindex);j.$set("tabindex",null)}else{j.$set("tabindex","-1")}j.$set("aria-owns",this.calendarPaneId);b(h);b(angular.element(this.calendarPane));var g=this;i.$on("$destroy",function(){g.detachCalendarPane()});if(j.mdIsOpen){i.$watch("ctrl.isOpen",function(z){if(z){g.openCalendarPane({target:g.inputElement})}else{g.closeCalendarPane()}})}if(angular.version.major===1&&angular.version.minor<=4){this.$onInit()}}w.prototype.$onInit=function(){this.locale=this.dateLocale?angular.extend({},this.$mdDateLocale,this.dateLocale):this.$mdDateLocale;this.installPropertyInterceptors();this.attachChangeListeners();this.attachInteractionListeners()};w.prototype.configureNgModel=function(d,a,c){this.ngModelCtrl=d;this.mdInputContainer=a;this.$attrs.$set("type","date");c[0].link.pre(this.$scope,{on:angular.noop,val:angular.noop,0:{}},this.$attrs,[d]);var e=this;e.ngModelCtrl.$formatters.push(function(f){var g=angular.isDefined(f)?Date.parse(f):null;if(!isNaN(g)&&angular.isNumber(g)){f=new Date(g)}if(f&&!(f instanceof Date)){throw Error("The ng-model for md-datepicker must be a Date instance or a value that can be parsed into a date. Currently the model is of type: "+typeof f)}e.onExternalChange(f);return f});d.$viewChangeListeners.unshift(angular.bind(this,this.updateErrorState));var b=e.$mdUtil.getModelOption(d,"updateOn");if(b){this.ngInputElement.on(b,angular.bind(this.$element,this.$element.triggerHandler,b))}};w.prototype.attachChangeListeners=function(){var a=this;a.$scope.$on("md-calendar-change",function(c,d){a.setModelValue(d);a.onExternalChange(d);a.closeCalendarPane()});a.ngInputElement.on("input",angular.bind(a,a.resizeInputElement));var b=angular.isDefined(this.debounceInterval)?this.debounceInterval:x;a.ngInputElement.on("input",a.$mdUtil.debounce(a.handleInputEvent,b,a))};w.prototype.attachInteractionListeners=function(){var c=this;var a=this.$scope;var b=this.$mdConstant.KEY_CODE;c.ngInputElement.on("keydown",function(d){if(d.altKey&&d.keyCode==b.DOWN_ARROW){c.openCalendarPane(d);a.$digest()}});if(c.openOnFocus){c.ngInputElement.on("focus",angular.bind(c,c.openCalendarPane));angular.element(c.$window).on("blur",c.windowBlurHandler);a.$on("$destroy",function(){angular.element(c.$window).off("blur",c.windowBlurHandler)})}a.$on("md-calendar-close",function(){c.closeCalendarPane()})};w.prototype.installPropertyInterceptors=function(){var a=this;if(this.$attrs.ngDisabled){var b=this.$scope.$parent;if(b){b.$watch(this.$attrs.ngDisabled,function(c){a.setDisabled(c)})}}Object.defineProperty(this,"placeholder",{get:function(){return a.inputElement.placeholder},set:function(c){a.inputElement.placeholder=c||""}})};w.prototype.setDisabled=function(a){this.isDisabled=a;this.inputElement.disabled=a;if(this.calendarButton){this.calendarButton.disabled=a}};w.prototype.updateErrorState=function(c){var a=c||this.date;this.clearErrorState();if(this.dateUtil.isValidDate(a)){a=this.dateUtil.createDateAtMidnight(a);if(this.dateUtil.isValidDate(this.minDate)){var d=this.dateUtil.createDateAtMidnight(this.minDate);this.ngModelCtrl.$setValidity("mindate",a>=d)}if(this.dateUtil.isValidDate(this.maxDate)){var b=this.dateUtil.createDateAtMidnight(this.maxDate);this.ngModelCtrl.$setValidity("maxdate",a<=b)}if(angular.isFunction(this.dateFilter)){this.ngModelCtrl.$setValidity("filtered",this.dateFilter(a))}}else{this.ngModelCtrl.$setValidity("valid",a==null)}angular.element(this.inputContainer).toggleClass(v,!this.ngModelCtrl.$valid)};w.prototype.clearErrorState=function(){this.inputContainer.classList.remove(v);["mindate","maxdate","filtered","valid"].forEach(function(a){this.ngModelCtrl.$setValidity(a,true)},this)};w.prototype.resizeInputElement=function(){this.inputElement.size=this.inputElement.value.length+s};w.prototype.handleInputEvent=function(){var b=this.inputElement.value;var c=b?this.locale.parseDate(b):null;this.dateUtil.setDateTimeToMidnight(c);var a=b==""||(this.dateUtil.isValidDate(c)&&this.locale.isDateComplete(b)&&this.isDateEnabled(c));if(a){this.setModelValue(c);this.date=c}this.updateErrorState(c)};w.prototype.isDateEnabled=function(a){return this.dateUtil.isDateWithinRange(a,this.minDate,this.maxDate)&&(!angular.isFunction(this.dateFilter)||this.dateFilter(a))};w.prototype.attachCalendarPane=function(){var e=this.calendarPane;var k=document.body;e.style.transform="";this.$element.addClass(m);this.mdInputContainer&&this.mdInputContainer.element.addClass(m);angular.element(k).addClass("md-datepicker-is-showing");var h=this.inputContainer.getBoundingClientRect();var g=k.getBoundingClientRect();if(!this.topMargin||this.topMargin<0){this.topMargin=(this.inputMask.parent().prop("clientHeight")-this.ngInputElement.prop("clientHeight"))/2}var a=h.top-g.top-this.topMargin;var f=h.left-g.left-this.leftMargin;var d=(g.top<0&&document.body.scrollTop==0)?-g.top:document.body.scrollTop;var i=(g.left<0&&document.body.scrollLeft==0)?-g.left:document.body.scrollLeft;var j=d+this.$window.innerHeight;var b=i+this.$window.innerWidth;this.inputMask.css({position:"absolute",left:this.leftMargin+"px",top:this.topMargin+"px",width:(h.width-1)+"px",height:(h.height-2)+"px"});if(f+n>b){if(b-n>0){f=b-n}else{f=i;var c=this.$window.innerWidth/n;e.style.transform="scale("+c+")"}e.classList.add("md-datepicker-pos-adjusted")}if(a+r>j&&j-r>d){a=j-r;e.classList.add("md-datepicker-pos-adjusted")}e.style.left=f+"px";e.style.top=a+"px";document.body.appendChild(e);this.$$rAF(function(){e.classList.add("md-pane-open")})};w.prototype.detachCalendarPane=function(){this.$element.removeClass(m);this.mdInputContainer&&this.mdInputContainer.element.removeClass(m);angular.element(document.body).removeClass("md-datepicker-is-showing");this.calendarPane.classList.remove("md-pane-open");this.calendarPane.classList.remove("md-datepicker-pos-adjusted");if(this.isCalendarOpen){this.$mdUtil.enableScrolling()}if(this.calendarPane.parentNode){this.calendarPane.parentNode.removeChild(this.calendarPane)}};w.prototype.openCalendarPane=function(b){if(!this.isCalendarOpen&&!this.isDisabled&&!this.inputFocusedOnWindowBlur){this.isCalendarOpen=this.isOpen=true;this.calendarPaneOpenedFrom=b.target;this.$mdUtil.disableScrollAround(this.calendarPane);this.attachCalendarPane();this.focusCalendar();this.evalAttr("ngFocus");var a=this;this.$mdUtil.nextTick(function(){a.documentElement.on("click touchstart",a.bodyClickHandler)},false);window.addEventListener(this.windowEventName,this.windowEventHandler)}};w.prototype.closeCalendarPane=function(){if(this.isCalendarOpen){var a=this;a.detachCalendarPane();a.ngModelCtrl.$setTouched();a.evalAttr("ngBlur");a.documentElement.off("click touchstart",a.bodyClickHandler);window.removeEventListener(a.windowEventName,a.windowEventHandler);a.calendarPaneOpenedFrom.focus();a.calendarPaneOpenedFrom=null;if(a.openOnFocus){a.$mdUtil.nextTick(b)}else{b()}}function b(){a.isCalendarOpen=a.isOpen=false}};w.prototype.getCalendarCtrl=function(){return angular.element(this.calendarPane.querySelector("md-calendar")).controller("mdCalendar")};w.prototype.focusCalendar=function(){var a=this;this.$mdUtil.nextTick(function(){a.getCalendarCtrl().focus()},false)};w.prototype.setFocused=function(a){if(!a){this.ngModelCtrl.$setTouched()}if(!this.openOnFocus){this.evalAttr(a?"ngFocus":"ngBlur")}this.isFocused=a};w.prototype.handleBodyClick=function(b){if(this.isCalendarOpen){var a=this.$mdUtil.getClosest(b.target,"md-calendar");if(!a){this.closeCalendarPane()}this.$scope.$digest()}};w.prototype.handleWindowBlur=function(){this.inputFocusedOnWindowBlur=document.activeElement===this.inputElement};w.prototype.evalAttr=function(a){if(this.$attrs[a]){this.$scope.$parent.$eval(this.$attrs[a])}};w.prototype.setModelValue=function(b){var a=this.$mdUtil.getModelOption(this.ngModelCtrl,"timezone");this.ngModelCtrl.$setViewValue(this.ngDateFilter(b,"yyyy-MM-dd",a))};w.prototype.onExternalChange=function(b){var a=this.$mdUtil.getModelOption(this.ngModelCtrl,"timezone");this.date=b;this.inputElement.value=this.locale.formatDate(b,a);this.mdInputContainer&&this.mdInputContainer.setHasValue(!!b);this.resizeInputElement();this.updateErrorState()}})();ngmaterial.components.datepicker=angular.module("material.components.datepicker");
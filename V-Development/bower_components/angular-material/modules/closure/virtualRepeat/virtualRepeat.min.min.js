/*!
 * AngularJS Material Design
 * https://github.com/angular/material
 * @license MIT
 * v1.1.4-master-87d1cb1
 */
;function VirtualRepeatContainerDirective(){return{controller:VirtualRepeatContainerController,template:virtualRepeatContainerTemplate,compile:function(a,b){a.addClass("md-virtual-repeat-container").addClass(b.hasOwnProperty("mdOrientHorizontal")?"md-orient-horizontal":"md-orient-vertical")}}}function virtualRepeatContainerTemplate(a){return'<div class="md-virtual-repeat-scroller" role="presentation"><div class="md-virtual-repeat-sizer" role="presentation"></div><div class="md-virtual-repeat-offsetter" role="presentation">'+a[0].innerHTML+"</div></div>"}function VirtualRepeatContainerController(p,k,g,b,q,d,c,f,m){this.$rootScope=q,this.$scope=c,this.$element=f,this.$attrs=m,this.size=0,this.scrollSize=0,this.scrollOffset=0,this.horizontal=this.$attrs.hasOwnProperty("mdOrientHorizontal"),this.repeater=null,this.autoShrink=this.$attrs.hasOwnProperty("mdAutoShrink"),this.autoShrinkMin=parseInt(this.$attrs.mdAutoShrinkMin,10)||0,this.originalSize=null,this.offsetSize=parseInt(this.$attrs.mdOffsetSize,10)||0,this.oldElementSize=null,this.maxElementPixels=g.ELEMENT_MAX_PIXELS,this.$attrs.mdTopIndex?(this.bindTopIndex=b(this.$attrs.mdTopIndex),this.topIndex=this.bindTopIndex(this.$scope),angular.isDefined(this.topIndex)||(this.topIndex=0,this.bindTopIndex.assign(this.$scope,0)),this.$scope.$watch(this.bindTopIndex,angular.bind(this,function(a){a!==this.topIndex&&this.scrollToIndex(a)}))):this.topIndex=0,this.scroller=f[0].querySelector(".md-virtual-repeat-scroller"),this.sizer=this.scroller.querySelector(".md-virtual-repeat-sizer"),this.offsetter=this.scroller.querySelector(".md-virtual-repeat-offsetter");var j=angular.bind(this,this.updateSize);p(angular.bind(this,function(){j();var e=k.debounce(j,10,null,!1),a=angular.element(d);this.size||e(),a.on("resize",e),c.$on("$destroy",function(){a.off("resize",e)}),c.$emit("$md-resize-enable"),c.$on("$md-resize",j)}))}function VirtualRepeatDirective(a){return{controller:VirtualRepeatController,priority:1000,require:["mdVirtualRepeat","^^mdVirtualRepeatContainer"],restrict:"A",terminal:!0,transclude:"element",compile:function(g,c){var f=c.mdVirtualRepeat,d=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)\s*$/),j=d[1],h=a(d[2]),b=c.mdExtraName&&a(c.mdExtraName);return function(l,o,k,n,m){n[0].link_(n[1],m,j,h,b)}}}}function VirtualRepeatController(c,g,b,f,d,j,h,a){this.$scope=c,this.$element=g,this.$attrs=b,this.$browser=f,this.$document=d,this.$mdUtil=a,this.$rootScope=j,this.$$rAF=h,this.onDemand=a.parseAttributeBoolean(b.mdOnDemand),this.browserCheckUrlChange=f.$$checkUrlChange,this.newStartIndex=0,this.newEndIndex=0,this.newVisibleEnd=0,this.startIndex=0,this.endIndex=0,this.itemSize=c.$eval(b.mdItemSize)||null,this.isFirstRender=!0,this.isVirtualRepeatUpdating_=!1,this.itemsLength=0,this.unwatchItemSize_=angular.noop,this.blocks={},this.pooledBlocks=[],c.$on("$destroy",angular.bind(this,this.cleanupBlocks_))}function VirtualRepeatModelArrayLike(a){if(!angular.isFunction(a.getItemAtIndex)||!angular.isFunction(a.getLength)){throw Error("When md-on-demand is enabled, the Object passed to md-virtual-repeat must implement functions getItemAtIndex() and getLength() ")}this.model=a}function ForceHeightDirective(a){return{restrict:"A",link:function(c,f,b){var d=c.$eval(b.mdForceHeight)||null;d&&f&&(f[0].style.height=d)}}}goog.provide("ngmaterial.components.virtualRepeat"),goog.require("ngmaterial.components.showHide"),goog.require("ngmaterial.core"),VirtualRepeatContainerController.$inject=["$$rAF","$mdUtil","$mdConstant","$parse","$rootScope","$window","$scope","$element","$attrs"],VirtualRepeatController.$inject=["$scope","$element","$attrs","$browser","$document","$rootScope","$$rAF","$mdUtil"],VirtualRepeatDirective.$inject=["$parse"],angular.module("material.components.virtualRepeat",["material.core","material.components.showHide"]).directive("mdVirtualRepeatContainer",VirtualRepeatContainerDirective).directive("mdVirtualRepeat",VirtualRepeatDirective).directive("mdForceHeight",ForceHeightDirective);var NUM_EXTRA=3;VirtualRepeatContainerController.prototype.register=function(a){this.repeater=a,angular.element(this.scroller).on("scroll wheel touchmove touchend",angular.bind(this,this.handleScroll_))},VirtualRepeatContainerController.prototype.isHorizontal=function(){return this.horizontal},VirtualRepeatContainerController.prototype.getSize=function(){return this.size},VirtualRepeatContainerController.prototype.setSize_=function(a){var b=this.getDimensionName_();this.size=a,this.$element[0].style[b]=a+"px"},VirtualRepeatContainerController.prototype.unsetSize_=function(){this.$element[0].style[this.getDimensionName_()]=this.oldElementSize,this.oldElementSize=null},VirtualRepeatContainerController.prototype.updateSize=function(){this.originalSize||(this.size=this.isHorizontal()?this.$element[0].clientWidth:this.$element[0].clientHeight,this.handleScroll_(),this.repeater&&this.repeater.containerUpdated())},VirtualRepeatContainerController.prototype.getScrollSize=function(){return this.scrollSize},VirtualRepeatContainerController.prototype.getDimensionName_=function(){return this.isHorizontal()?"width":"height"},VirtualRepeatContainerController.prototype.sizeScroller_=function(b){var f=this.getDimensionName_(),a=this.isHorizontal()?"height":"width";if(this.sizer.innerHTML="",b<this.maxElementPixels){this.sizer.style[f]=b+"px"}else{this.sizer.style[f]="auto",this.sizer.style[a]="auto";var d=Math.floor(b/this.maxElementPixels),c=document.createElement("div");c.style[f]=this.maxElementPixels+"px",c.style[a]="1px";for(var g=0;g<d;g++){this.sizer.appendChild(c.cloneNode(!1))}c.style[f]=b-d*this.maxElementPixels+"px",this.sizer.appendChild(c)}},VirtualRepeatContainerController.prototype.autoShrink_=function(b){var d=Math.max(b,this.autoShrinkMin*this.repeater.getItemSize());if(this.autoShrink&&d!==this.size){null===this.oldElementSize&&(this.oldElementSize=this.$element[0].style[this.getDimensionName_()]);var a=this.originalSize||this.size;if(!a||d<a){this.originalSize||(this.originalSize=this.size),this.setSize_(d)}else{if(null!==this.originalSize){this.unsetSize_();var c=this.originalSize;this.originalSize=null,c||this.updateSize(),this.setSize_(c||this.size)}}this.repeater.containerUpdated()}},VirtualRepeatContainerController.prototype.setScrollSize=function(a){var b=a+this.offsetSize;this.scrollSize!==b&&(this.sizeScroller_(b),this.autoShrink_(b),this.scrollSize=b)},VirtualRepeatContainerController.prototype.getScrollOffset=function(){return this.scrollOffset},VirtualRepeatContainerController.prototype.scrollTo=function(a){this.scroller[this.isHorizontal()?"scrollLeft":"scrollTop"]=a,this.handleScroll_()},VirtualRepeatContainerController.prototype.scrollToIndex=function(b){var c=this.repeater.getItemSize(),a=this.repeater.itemsLength;b>a&&(b=a-1),this.scrollTo(c*b)},VirtualRepeatContainerController.prototype.resetScroll=function(){this.scrollTo(0)},VirtualRepeatContainerController.prototype.handleScroll_=function(){var b="rtl"!=document.dir&&"rtl"!=document.body.dir;b||this.maxSize||(this.scroller.scrollLeft=this.scrollSize,this.maxSize=this.scroller.scrollLeft);var f=this.isHorizontal()?b?this.scroller.scrollLeft:this.maxSize-this.scroller.scrollLeft:this.scroller.scrollTop;if(!(f===this.scrollOffset||f>this.scrollSize-this.size)){var a=this.repeater.getItemSize();if(a){var d=Math.max(0,Math.floor(f/a)-NUM_EXTRA),c=(this.isHorizontal()?"translateX(":"translateY(")+(!this.isHorizontal()||b?d*a:-(d*a))+"px)";if(this.scrollOffset=f,this.offsetter.style.webkitTransform=c,this.offsetter.style.transform=c,this.bindTopIndex){var g=Math.floor(f/a);g!==this.topIndex&&g<this.repeater.getItemCount()&&(this.topIndex=g,this.bindTopIndex.assign(this.$scope,g),this.$rootScope.$$phase||this.$scope.$digest())}this.repeater.containerUpdated()}}},VirtualRepeatController.Block,VirtualRepeatController.prototype.link_=function(b,f,a,d,c){this.container=b,this.transclude=f,this.repeatName=a,this.rawRepeatListExpression=d,this.extraName=c,this.sized=!1,this.repeatListExpression=angular.bind(this,this.repeatListExpression_),this.container.register(this)},VirtualRepeatController.prototype.cleanupBlocks_=function(){angular.forEach(this.pooledBlocks,function(a){a.element.remove()})},VirtualRepeatController.prototype.readItemSize_=function(){if(!this.itemSize){this.items=this.repeatListExpression(this.$scope),this.parentNode=this.$element[0].parentNode;var a=this.getBlock_(0);a.element[0].parentNode||this.parentNode.appendChild(a.element[0]),this.itemSize=a.element[0][this.container.isHorizontal()?"offsetWidth":"offsetHeight"]||null,this.blocks[0]=a,this.poolBlock_(0),this.itemSize&&this.containerUpdated()}},VirtualRepeatController.prototype.repeatListExpression_=function(b){var c=this.rawRepeatListExpression(b);if(this.onDemand&&c){var a=new VirtualRepeatModelArrayLike(c);return a.$$includeIndexes(this.newStartIndex,this.newVisibleEnd),a}return c},VirtualRepeatController.prototype.containerUpdated=function(){return this.itemSize?(this.sized||(this.items=this.repeatListExpression(this.$scope)),this.sized||(this.unwatchItemSize_(),this.sized=!0,this.$scope.$watchCollection(this.repeatListExpression,angular.bind(this,function(a,b){this.isVirtualRepeatUpdating_||this.virtualRepeatUpdate_(a,b)}))),this.updateIndexes_(),void ((this.newStartIndex!==this.startIndex||this.newEndIndex!==this.endIndex||this.container.getScrollOffset()>this.container.getScrollSize())&&(this.items instanceof VirtualRepeatModelArrayLike&&this.items.$$includeIndexes(this.newStartIndex,this.newEndIndex),this.virtualRepeatUpdate_(this.items,this.items)))):(this.unwatchItemSize_&&this.unwatchItemSize_!==angular.noop&&this.unwatchItemSize_(),this.unwatchItemSize_=this.$scope.$watchCollection(this.repeatListExpression,angular.bind(this,function(a){a&&a.length&&this.readItemSize_()})),void (this.$rootScope.$$phase||this.$scope.$digest()))},VirtualRepeatController.prototype.getItemSize=function(){return this.itemSize},VirtualRepeatController.prototype.getItemCount=function(){return this.itemsLength},VirtualRepeatController.prototype.virtualRepeatUpdate_=function(u,m){this.isVirtualRepeatUpdating_=!0;var j=u&&u.length||0,b=!1;if(this.items&&j<this.items.length&&0!==this.container.getScrollOffset()){this.items=u;var v=this.container.getScrollOffset();this.container.resetScroll(),this.container.scrollTo(v)}j!==this.itemsLength&&(b=!0,this.itemsLength=j),this.items=u,(u!==m||b)&&this.updateIndexes_(),this.parentNode=this.$element[0].parentNode,b&&this.container.setScrollSize(j*this.itemSize),Object.keys(this.blocks).forEach(function(a){var h=parseInt(a,10);(h<this.newStartIndex||h>=this.newEndIndex)&&this.poolBlock_(h)},this),this.$browser.$$checkUrlChange=angular.noop;var f,d,g=[],q=[];for(f=this.newStartIndex;f<this.newEndIndex&&null==this.blocks[f];f++){d=this.getBlock_(f),this.updateBlock_(d,f),g.push(d)}for(;null!=this.blocks[f];f++){this.updateBlock_(this.blocks[f],f)}for(var k=f-1;f<this.newEndIndex;f++){d=this.getBlock_(f),this.updateBlock_(d,f),q.push(d)}if(g.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(g),this.$element[0].nextSibling),q.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(q),this.blocks[k]&&this.blocks[k].element[0].nextSibling),this.$browser.$$checkUrlChange=this.browserCheckUrlChange,this.startIndex=this.newStartIndex,this.endIndex=this.newEndIndex,this.isFirstRender){this.isFirstRender=!1;var c=this.$attrs.mdStartIndex?this.$scope.$eval(this.$attrs.mdStartIndex):this.container.topIndex;this.$mdUtil.nextTick(function(){this.container.scrollToIndex(c)}.bind(this))}this.isVirtualRepeatUpdating_=!1},VirtualRepeatController.prototype.getBlock_=function(a){if(this.pooledBlocks.length){return this.pooledBlocks.pop()}var b;return this.transclude(angular.bind(this,function(c,d){b={element:c,"new":!0,scope:d},this.updateScope_(d,a),this.parentNode.appendChild(c[0])})),b},VirtualRepeatController.prototype.updateBlock_=function(a,b){this.blocks[b]=a,(a["new"]||a.scope.$index!==b||a.scope[this.repeatName]!==this.items[b])&&(a["new"]=!1,this.updateScope_(a.scope,b),this.$rootScope.$$phase||a.scope.$digest())},VirtualRepeatController.prototype.updateScope_=function(a,b){a.$index=b,a[this.repeatName]=this.items&&this.items[b],this.extraName&&(a[this.extraName(this.$scope)]=this.items[b])},VirtualRepeatController.prototype.poolBlock_=function(a){this.pooledBlocks.push(this.blocks[a]),this.parentNode.removeChild(this.blocks[a].element[0]),delete this.blocks[a]},VirtualRepeatController.prototype.domFragmentFromBlocks_=function(a){var b=this.$document[0].createDocumentFragment();return a.forEach(function(c){b.appendChild(c.element[0])}),b},VirtualRepeatController.prototype.updateIndexes_=function(){var a=this.items?this.items.length:0,b=Math.ceil(this.container.getSize()/this.itemSize);this.newStartIndex=Math.max(0,Math.min(a-b,Math.floor(this.container.getScrollOffset()/this.itemSize))),this.newVisibleEnd=this.newStartIndex+b+NUM_EXTRA,this.newEndIndex=Math.min(a,this.newVisibleEnd),this.newStartIndex=Math.max(0,this.newStartIndex-NUM_EXTRA)},VirtualRepeatModelArrayLike.prototype.$$includeIndexes=function(b,c){for(var a=b;a<c;a++){this.hasOwnProperty(a)||(this[a]=this.model.getItemAtIndex(a))}this.length=this.model.getLength()},ForceHeightDirective.$inject=["$mdUtil"],ngmaterial.components.virtualRepeat=angular.module("material.components.virtualRepeat");